---
apiVersion: addons.kubernetes.vmware.com/v1alpha1
kind: AddonConfig
metadata:
  name: cluster-ako
  labels:
    app.kubernetes.io/name: ako
    config.k8s.io/inject-cluster-name-prefix: "true"
spec:
  addonConfigDefinitionRef:
     name: ako.kubernetes.vmware.com.2.1.3+vmware.1-vks.1 # Ensure this matches your available version
     namespace: vmware-system-vks-public
  values:
    AKOSettings:
      clusterName: cluster         
      vpcMode: true
      istioEnabled: false

    ControllerSettings:
      controllerHost: "10.0.0.150"  
      cloudName: "nsx-wld-cloud"    
      tenantName: "replace-me"     

    NetworkSettings:
  
      nsxtT1LR: "/orgs/default/projects/replace-me/vpcs/replace-me" 
---
apiVersion: addons.kubernetes.vmware.com/v1alpha1
kind: AddonInstall
metadata:
  name: cluster-ako-installer
  labels:
    app.kubernetes.io/name: ako
    config.k8s.io/inject-cluster-name-prefix: "true"
spec:
  addonRef:
    name: ako
  clusters:
  - selector:
      matchLabels:
        cluster.x-k8s.io/cluster-name: cluster 
  paused: false
